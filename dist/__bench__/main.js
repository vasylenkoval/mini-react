var m=[];var b=Symbol("propsCompareFn"),O="TEXT";function B(e,t=[]){for(let n of e){let o=typeof n;if(o==="object"&&n){Array.isArray(n)?B(n,t):t.push(n);continue}(o==="string"||o==="number")&&t.push({type:O,props:{nodeValue:n},children:m,key:null})}return t.length?t:m}function r(e,t,...n){let o=t??{},s=null;return n.length>0&&(s=B(n),o.children=s),{type:e,props:o,children:s,key:o.key!==void 0?o.key:null}}function ae(e){return e===O?document.createTextNode(""):document.createElement(e)}var de="children",ue="on",H=e=>e.startsWith(ue),q=e=>e!==de&&!H(e),Y=e=>e.toLowerCase().substring(2),z=e=>e==="className"?"class":e,pe=(e,t)=>e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t;function fe(e,t,n,o){if(t.nodeType===3){t.nodeValue!==n.nodeValue&&(t.nodeValue=n.nodeValue);return}let s=t;if(o){for(let l in o)if(!(l in n))if(q(l)){let i=z(l);s.removeAttribute(i)}else H(l)&&s.removeEventListener(Y(l),o[l])}for(let l in n){if(o&&n[l]===o[l])continue;let i=n[l];if(q(l)&&typeof i=="string"){let c=z(l);pe(c,s)?s[c]=i:s.setAttribute(c,i)}else if(H(l)){let c=Y(l);o&&o[l]&&s.removeEventListener(c,o[l]),s.addEventListener(c,n[l])}}s.__fiberRef=e}var P=globalThis.Node?.prototype,me=P?.insertBefore,he=P?.removeChild,ye=P?.appendChild;function ge(e,t){he.call(e,t)}function be(e,t){ye.call(e,t)}function Ee(e,t){e.replaceWith(t)}function Te(e,t,n){me.call(e,t,n)}var $={createNode:ae,addProps:fe,removeChild:ge,appendChild:be,replaceWith:Ee,insertBefore:Te};var f={hooks:[],notifyOnStateChange:()=>{},scheduleEffect:()=>{}},g=-1;function K(e,t,n){for(let o of e)o.type===0&&o.pending&&(o.value=o.pending.value,o.pending=void 0);f.hooks=e,f.notifyOnStateChange=t,f.scheduleEffect=n,g=-1}function ke(e){g++;let t=f.hooks[g];if(t)return t.notify=f.notifyOnStateChange,[t.value,t.setter];let n={type:0,notify:f.notifyOnStateChange,value:typeof e=="function"?e():e,setter(o){let s=n.pending?n.pending.value:n.value,l=typeof o=="function"?o:void 0,i=l?l(s):o;i!==s&&(n.pending={value:i},n.notify())}};return f.hooks.push(n),[n.value,n.setter]}function Q(e){let t;for(let n of e)n.type===1&&n.cleanup&&(t??(t=[])).push(n.cleanup);return t}function Ce(e,t){return!e||!t?!1:e.length===t.length&&(e.length===0||e.every((n,o)=>n===t[o]))}function L(e,t){g++;let n=f.hooks[g];if(n)return Ce(t,n.deps)||(n.deps=t,n.value=e()),n.value;let o={type:3,deps:t,value:e()};return f.hooks.push(o),o.value}function Fe(e){g++;let t=f.hooks[g];if(t)return t.value;let n={type:2,value:{current:e}};return f.hooks.push(n),n.value}function G(e,t,n){let o=Fe({dispatch:void 0,initState:n?n(t):t}),[s,l]=ke(o.current.initState);if(o.current.dispatch)return[s,o.current.dispatch];function i(c){l(k=>e(k,c))}return o.current.dispatch=i,[s,i]}function C(e){return e(ve)}function ve(){return 100}var te="root",E,R=[],a,Se,F=[],x=[],v=[],N=[],h=$,ne=(e,t)=>!1;function w(){let e={key:null,children:m},t={parent:null,child:null,sibling:null,type:"",props:e,effectTag:0,old:null,isOld:!1,dom:null,stateNode:null,didChangePos:!1,version:0,childElements:m,fromElement:{type:"",props:e,children:m,key:null},propsCompareFn:ne};return t.stateNode={current:t,hooks:[]},t}function oe(e,t,n){n&&(h=n);let o=w();o.type=te,o.dom=e,o.props={key:null,children:[t]},o.fromElement={type:"div",props:o.props,children:[t],key:null},a=o,E=o,C(M)}function xe(e){R.includes(e)||(R.push(e),C(M))}function Ne(e){return e.didChangePos||e.effectTag!==3}function Re(){for(let e of F)Ae(e);if(F=[],a){let e=a;for(;e;)we(e),e=se(e,a,Ne,e.effectTag===3);for(let t=N.length-1;t>=0;t--)N[t]();if(N.splice(0),a.type===te)Se=a;else{let t=a.old,n=a.parent,o=n.child;if(o===t)n.child=a;else for(;o;){if(o.sibling===t){o.sibling=a;break}o=o.sibling}}}a=null;for(let e=v.length-1;e>=0;e--)v[e]();v.splice(0);for(let e=x.length-1;e>=0;e--)x[e]();x.splice(0)}function X(e){return!!e.dom}function Me(e){return typeof e.type!="string"}function Ae(e){let t=e.dom??A(e,e,X)?.dom;t&&t.parentNode&&h.removeChild(t.parentNode,t);let n=e;for(;n;){if(n.stateNode.hooks.length){let o=Q(n.stateNode.hooks);o&&v.push(...o.reverse())}n=A(n,e,Me)}e.effectTag=2,e.isOld=!0,e.old=null,e.child=null,e.sibling=null,e.parent=null,e.dom=null,e.stateNode=null,e.childElements=m}function we(e){if(e.didChangePos){let n=e.dom??A(e,e,X)?.dom;if(n){let o=e.sibling?e.sibling?.dom??A(e.sibling,e,X)?.dom??null:null;N.push(()=>{n.nextSibling!==o&&h.insertBefore(n.parentNode,n,o)})}}if(!(e.dom&&e.parent)||e.effectTag===3)return;let t=e.parent;for(;!t.dom;)t=t.parent;if(e.effectTag===1&&h.addProps(e,e.dom,e.props,e.old?.props||null),e.effectTag===0){let n=t.dom,o=e.dom;h.appendChild(n,o)}}function le(){if(!R.length)return null;let e=R.shift();if(e.isOld)return le();let t=w();t.type=e.type,t.parent=e.parent,t.child=e.child,t.sibling=e.sibling,t.old=e,t.isOld=!1,t.dom=e.dom;let n=e.stateNode;return t.stateNode=n,n.current=t,t.effectTag=1,t.didChangePos=!1,t.props=e.props,t.version=e.version+1,t.childElements=e.childElements,t.fromElement=e.fromElement,t.propsCompareFn=e.propsCompareFn,e.old=null,e.isOld=!0,t}function M(e){let t=!1;for(;E&&!t;)E=Pe(E),t=e()<1;!E&&a&&Re();let n=le();if(n){a=n,E=a,C(M);return}a&&C(M)}function Oe(e){b in e.type&&e.type[b]&&(e.propsCompareFn=e.type[b]);let t,n,o=e.stateNode;K(o.hooks,function(){xe(o.current)},function(i,c){(t??(t=[])).push(i),c&&(n??(n=[])).push(c)});let s=e.type(e.props);e.childElements=[s],t&&x.push(...t.reverse()),n&&v.push(...n.reverse())}function He(e){e.dom||(e.dom=h.createNode(e.type),h.addProps(e,e.dom,e.props,null)),e.childElements=e.fromElement.children??m}function Pe(e){return typeof e.type=="string"&&He(e),typeof e.type=="function"&&Oe(e),Je(e,e.childElements),se(e,a,Le)}function Le(e){return e.effectTag!==3}function Xe(){return!0}function se(e,t,n=Xe,o=!1){if(!o&&e.child&&n(e.child))return e.child;let s=o?e:e.child??e;for(;s&&s!==t;){let l=s.sibling;for(;l;){if(n(l))return l;l=l.sibling}s=s.parent}return null}function Z(e,t){let n=e;if(n.child)return n.child;for(;n&&n!==t;){let o=n.sibling;if(o)return o;n=n.parent}return null}function A(e,t,n){if(!e)return null;let o=Z(e,t);for(;o;){if(n(o))return o;o=Z(o,t)}return null}function Je(e,t){if(!t.length&&e.dom&&e.parent&&e.old&&e.old.child){let d=e.old;F.push(d),e.old=null,e.effectTag=0,e.childElements=m,e.child=null,e.dom=h.createNode(e.type),h.addProps(e,e.dom,e.props,null);return}let n=e.old?.child??null,o=null,s=0,l=new Map,i=[],c=n,k=0;for(;c;){let d=c.fromElement.key??k;l.set(d,{fiber:c,oldListIdx:k}),i.push(c),c=c.sibling,k++}let _=[];for(let d=0;d<t.length;d++){let y=t[d],U=y.key??d,V=l.get(U),u=null;if(V){let{fiber:p,oldListIdx:j}=V;if(l.delete(U),_.push(j),p.type===y.type){if(u=De(y,e,p),u.didChangePos=d!==j,p.fromElement===y||typeof y.type!="string"&&u.propsCompareFn?.(p.props,y.props)){u.effectTag=3,u.child=p.child;let S=p.child;for(;S;)S.parent=u,S=S.sibling}p.old=null,p.isOld=!0,p.sibling=null,p.parent=null}else F.push(p),u=ee(y,e)}else u=ee(y,e);u&&(s===0?e.child=u:o.sibling=u,o=u,s++)}l.forEach(d=>{F.push(d.fiber)});let W=Ie(_);if(W.length)for(let d of W)i[d].didChangePos=!0}function Ie(e){if(e.length===0)return[];let t=[e[0]],n=[];for(let o=1;o<e.length;o++){let s=e[o];if(s>t[t.length-1])t.push(s);else{let l=0,i=t.length-1;for(;l<i;){let c=l+i>>>1;t[c]<s?l=c+1:i=c}n.push(t[l]),t[l]=s}}return n}function ee(e,t){let n=w();return n.type=e.type,n.parent=t,n.props=e.props,n.fromElement=e,n.effectTag=0,typeof e.type=="string"&&(n.propsCompareFn=ne),n}function De(e,t,n){let o=w();o.type=e.type,o.parent=t,o.old=n,o.dom=n.dom,o.effectTag=1,o.props=e.props,o.version=n.version+1,o.fromElement=e,o.propsCompareFn=n.propsCompareFn;let s=n.stateNode;return s.current=o,o.stateNode=s,o}function _e(e,t){if(e===t)return!0;let n=Object.keys(e),o=Object.keys(t);if(n.length!==o.length)return!1;for(let s=0;s<n.length;s++){let l=n[s];if(e[l]!==t[l])return!1}return!0}function J(e,t=_e){function n(o){return e(o)}return n[b]=t,n}var I=e=>Math.round(Math.random()*1e3)%e,re=["pretty","large","big","small","tall","short","long","handsome","plain","quaint","clean","elegant","easy","angry","crazy","helpful","mushy","odd","unsightly","adorable","important","inexpensive","cheap","expensive","fancy"],ie=["red","yellow","blue","green","pink","brown","purple","brown","white","black","orange"],ce=["table","chair","house","bbq","desk","car","pony","cookie","sandwich","burger","pizza","mouse","keyboard"],We=1,D=e=>{let t=new Array(e);for(let n=0;n<e;n++)t[n]={id:We++,label:`${re[I(re.length)]} ${ie[I(ie.length)]} ${ce[I(ce.length)]}`};return t},Ue={data:[],selected:0},Ve=(e,t)=>{let{data:n,selected:o}=e;switch(t.type){case"RUN":return{data:D(1e3),selected:0};case"RUN_LOTS":return{data:D(1e4),selected:0};case"ADD":return{data:n.concat(D(1e3)),selected:o};case"UPDATE":{let l=n.slice(0);for(let i=0;i<l.length;i+=10){let c=l[i];l[i]={id:c.id,label:c.label+" !!!"}}return{data:l,selected:o}}case"CLEAR":return{data:[],selected:0};case"SWAP_ROWS":let s=[...n];if(n.length>998){let l=s[1],i=s[998];s[1]=i,s[998]=l}return{data:s,selected:o};case"REMOVE":{let l=n.findIndex(i=>i.id===t.id);return{data:[...n.slice(0,l),...n.slice(l+1)],selected:o}}case"SELECT":return{data:n,selected:t.id};default:return e}},je=J(({selected:e,item:t,dispatch:n})=>r("tr",{className:e?"danger":""},r("td",{className:"col-md-1"},t.id),r("td",{className:"col-md-4"},r("a",{onClick:L(()=>()=>n({type:"SELECT",id:t.id}),[])},t.label)),r("td",{className:"col-md-1"},r("a",{onClick:L(()=>()=>n({type:"REMOVE",id:t.id}),[])},r("span",{className:"glyphicon glyphicon-remove","aria-hidden":"true"}))),r("td",{className:"col-md-6"})),(e,t)=>e.selected===t.selected&&e.item===t.item),T=({id:e,cb:t,title:n})=>r("div",{className:"col-sm-6 smallpad"},r("button",{type:"button",className:"btn btn-primary btn-block",id:e,onClick:t},n)),Be=J(({dispatch:e})=>r("div",{className:"jumbotron"},r("div",{className:"row"},r("div",{className:"col-md-6"},r("h1",null,"React Hooks keyed")),r("div",{className:"col-md-6"},r("div",{className:"row"},r(T,{id:"run",title:"Create 1,000 rows",cb:()=>e({type:"RUN"})}),r(T,{id:"runlots",title:"Create 10,000 rows",cb:()=>e({type:"RUN_LOTS"})}),r(T,{id:"add",title:"Append 1,000 rows",cb:()=>e({type:"ADD"})}),r(T,{id:"update",title:"Update every 10th row",cb:()=>e({type:"UPDATE"})}),r(T,{id:"clear",title:"Clear",cb:()=>e({type:"CLEAR"})}),r(T,{id:"swaprows",title:"Swap Rows",cb:()=>e({type:"SWAP_ROWS"})}))))),()=>!0),qe=()=>{let[{data:e,selected:t},n]=G(Ve,Ue);return r("div",{className:"container"},r(Be,{dispatch:n}),r("table",{className:"table table-hover table-striped test-data"},r("tbody",null,e.map(o=>r(je,{key:o.id,item:o,selected:t===o.id,dispatch:n})))),r("span",{className:"preloadicon glyphicon glyphicon-remove","aria-hidden":"true"}))};oe(document.getElementById("main"),r(qe,null));
